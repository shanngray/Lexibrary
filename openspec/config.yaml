schema: spec-driven

context: |
  Python 3.11+ CLI tool. src layout, hatchling build, uv package manager.
  Stack: Typer CLI, Pydantic 2 config (from lexibrary.toml via stdlib tomllib), Rich console output, pathspec ignore matching.
  Phase-based build â€” deps added per-phase only. See plans/ for roadmap.
  Gotchas: pathspec pattern name is "gitignore" (NOT "gitwildmatch"). No bare print(). `from __future__ import annotations` in every module.
  Architecture: BAML for all LLM prompts (provider-agnostic), bottom-up crawl with SHA-256 change detection, watchdog daemon.

rules:
  proposal:
    - Identify which implementation phase(s) the change touches
    - List any new dependencies needed and confirm they belong in the current phase
  specs:
    - One spec file per capability
    - Requirements use SHALL/MUST normative language
    - Every requirement has at least one Given/When/Then scenario
  tasks:
    - Cross-reference the relevant phase plan in plans/ for scope boundaries
    - Each task should be independently completable
    - Run `/opsx:sync-beads <change-name>` immediately after tasks.md is finalized to create beads
